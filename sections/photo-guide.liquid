{% comment %}
Perkie Photo Guide — Shopify Liquid Section (Dawn Pro friendly)

Usage:
1) Save as sections/photo-guide.liquid in your theme.
2) In the theme editor, add the section to any page. Replace CTA link with your upload modal or page.
3) Upload example images via the section settings or use your own asset images.

This section exposes simple theme settings (heading, subhead, 3 example images, CTA label/link, and color controls) so you can style it from the theme editor. It uses inline section settings for colors to avoid relying on specific Dawn variable names.
{% endcomment %}

<section id="perkie-photo-guide" class="section" style="background: {{ section.settings.color_background }}; color: {{ section.settings.color_text }}; padding: 32px 16px;">
  <div class="page-width">
    <div class="grid grid--2">

      <!-- Left column: headings & content -->
      <div class="stack">
        <header>
          <h1 class="section-header__title" style="color: {{ section.settings.color_heading | default: section.settings.color_text }}; margin-bottom:6px;">{{ section.settings.heading }}</h1>
          {% if section.settings.subheading != blank %}
            <p class="section-header__subtext" style="color: {{ section.settings.color_subheading | default: section.settings.color_text }}; margin-top:4px;">{{ section.settings.subheading }}</p>
          {% endif %}
        </header>

        <div class="rte" style="margin-top:16px;">
          <h3 style="margin:0 0 8px 0;">Why your photo choice matters</h3>
          <p style="margin:0 0 12px 0;">Your photo is the reference our artists use to hand-illustrate your Perkie Print. Clear eyes, good lighting, and visible fur detail help capture personality and likeness — which makes the final print look like a true work of art.</p>

          <h3 style="margin-top:12px;">Best photos to pick (or take)</h3>
          <ul style="margin:8px 0 12px 1rem;">
            <li><strong>Face &amp; expression:</strong> Choose a shot where your pet’s eyes are visible — eyes are the most important detail for likeness.</li>
            <li><strong>Lighting:</strong> Natural, indirect daylight is ideal — avoid harsh backlight and direct flash.</li>
            <li><strong>Framing:</strong> Aim for the head &amp; shoulders to fill the frame. Step back and zoom to avoid nose distortion.</li>
            <li><strong>Background:</strong> Simple, uncluttered backgrounds help the pet stand out.</li>
            <li><strong>Action shots:</strong> Great if sharp — but for guaranteed results, choose a calm, in-pose photo with clear eyes.</li>
          </ul>

          <h3 style="margin-top:12px;">Phone camera quick settings</h3>
          <ul style="margin:8px 0 12px 1rem;">
            <li>Use the rear camera (higher quality than the selfie camera).</li>
            <li>Turn off heavy filters and shoot in standard <em>Photo</em> mode when possible.</li>
            <li>Tap to focus on the eyes and lock exposure if available.</li>
            <li>If available, use a short burst and pick the sharpest frame.</li>
          </ul>

          <h3 style="margin-top:12px;">If you’re choosing an existing photo</h3>
          <p style="margin:0 0 12px 0;">Prefer original files (not screenshots). Choose the clearest version with the best lighting and least clutter. Upload 2–3 candidates and we’ll suggest the best one in your preview if you like.</p>

          <h3 style="margin-top:12px;">Common mistakes to avoid</h3>
          <ul style="margin:8px 0 12px 1rem;">
            <li>Blurry or out-of-focus images</li>
            <li>Heavy filters that alter color &amp; texture</li>
            <li>Harsh backlight that obscures the face</li>
            <li>Extreme crops or tiny headshots with not enough detail</li>
            <li>Selfies shot from high angles (can distort proportions)</li>
          </ul>

          <h3 style="margin-top:12px;">File requirements &amp; upload tips</h3>
          <ul style="margin:8px 0 12px 1rem;">
            <li><strong>File types:</strong> JPEG or PNG preferred.</li>
            <li><strong>Resolution:</strong> Higher is better — 2000px+ on the shortest side is excellent when available.</li>
            <li><strong>Color:</strong> Keep sRGB when possible.</li>
            <li><strong>Filename tip:</strong> Use simple names like <code>bella_window.jpg</code> to help our artists.</li>
          </ul>

          <h3 style="margin-top:12px;">What happens after you upload</h3>
          <ol style="margin:8px 0 12px 1rem;">
            <li>Upload and leave notes for the artist (pose, background, colors).</li>
            <li>We send a digital preview in <strong>1–3 business days</strong>.</li>
            <li>Request unlimited edits until it’s perfect.</li>
            <li>Approve and we print your Perkie Print.</li>
          </ol>
        </div>
      </div>

      <!-- Right column: carousel, CTA & FAQ -->
      <div class="stack">
        <!-- Examples carousel -->
        <div class="card" style="padding:12px; background: {{ section.settings.card_background | default: '#fff' }}; border-radius:6px;">
          <h4 style="margin:0 0 10px 0;">Examples: Good • Okay • Not great</h4>

          <div class="carousel" id="perkie-carousel-{{ section.id }}" aria-roledescription="carousel">
            <div class="carousel-track" style="display:flex; transition:transform 300ms ease; width:300%;">

              <div class="carousel-slide" style="flex:0 0 100%;">
                {% if section.settings.good_image != blank %}
                  <img src="{{ section.settings.good_image | img_url: '1200x' }}" alt="Good example: clear headshot at eye level with soft natural light" style="width:100%; height:220px; object-fit:cover; border-radius:6px;">
                {% else %}
                  <div style="width:100%; height:220px; display:flex; align-items:center; justify-content:center; background:#f6f6f6; border-radius:6px;">Upload a 'Good' example image</div>
                {% endif %}
                <p style="margin-top:8px; color: {{ section.settings.color_text_secondary }}; font-size:13px;">Good: Clear headshot, eye-level, soft light.</p>
              </div>

              <div class="carousel-slide" style="flex:0 0 100%;">
                {% if section.settings.okay_image != blank %}
                  <img src="{{ section.settings.okay_image | img_url: '1200x' }}" alt="Okay example: action shot that is sharp and well-lit" style="width:100%; height:220px; object-fit:cover; border-radius:6px;">
                {% else %}
                  <div style="width:100%; height:220px; display:flex; align-items:center; justify-content:center; background:#f6f6f6; border-radius:6px;">Upload an 'Okay' example image</div>
                {% endif %}
                <p style="margin-top:8px; color: {{ section.settings.color_text_secondary }}; font-size:13px;">Okay: Action shot — sharp and well-lit works.</p>
              </div>

              <div class="carousel-slide" style="flex:0 0 100%;">
                {% if section.settings.bad_image != blank %}
                  <img src="{{ section.settings.bad_image | img_url: '1200x' }}" alt="Bad example: blurry, filtered, or low-res image" style="width:100%; height:220px; object-fit:cover; border-radius:6px;">
                {% else %}
                  <div style="width:100%; height:220px; display:flex; align-items:center; justify-content:center; background:#f6f6f6; border-radius:6px;">Upload a 'Bad' example image</div>
                {% endif %}
                <p style="margin-top:8px; color: {{ section.settings.color_text_secondary }}; font-size:13px;">Not great: Blurry, filtered or low-res — avoid.</p>
              </div>

            </div>

            <!-- Controls -->
            <div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px;">
              <button type="button" class="btn" data-action="prev" aria-label="Previous example" style="background:transparent; border:1px solid rgba(0,0,0,0.06); padding:6px 10px; border-radius:6px;">‹ Prev</button>
              <div style="display:flex; gap:8px;">
                <button type="button" class="dot active" data-index="0" aria-label="Slide 1" style="width:8px; height:8px; border-radius:999px; background:{{ section.settings.dot_color_active }}; border: none;"></button>
                <button type="button" class="dot" data-index="1" aria-label="Slide 2" style="width:8px; height:8px; border-radius:999px; background:{{ section.settings.dot_color }}; border: none;"></button>
                <button type="button" class="dot" data-index="2" aria-label="Slide 3" style="width:8px; height:8px; border-radius:999px; background:{{ section.settings.dot_color }}; border: none;"></button>
              </div>
              <button type="button" class="btn" data-action="next" aria-label="Next example" style="background:transparent; border:1px solid rgba(0,0,0,0.06); padding:6px 10px; border-radius:6px;">Next ›</button>
            </div>
          </div>
        </div>

        <!-- CTA -->
        <div style="padding:12px; background: {{ section.settings.card_background | default: '#fff' }}; border-radius:6px;">
          <h4 style="margin:0 0 8px 0;">Ready to try?</h4>
          <p style="margin:0 0 12px 0; color: {{ section.settings.color_text_secondary }};">Upload your favorite photo and get a preview in <strong>1–3 business days</strong>. Unlimited edits included.</p>
          <a href="{{ section.settings.cta_link }}" class="btn-primary" style="display:inline-block; width:100%; text-align:center; padding:10px 12px; background: {{ section.settings.cta_color | default: '#10b981' }}; color: {{ section.settings.cta_text_color | default: '#fff' }}; border-radius:6px; text-decoration:none; font-weight:600;">{{ section.settings.cta_label }}</a>
          <p style="font-size:12px; color: {{ section.settings.color_text_secondary }}; margin-top:8px;">JPEG or PNG preferred • Upload the original file (not a screenshot)</p>
        </div>

        <!-- FAQ accordion -->
        <div style="padding:12px; background: {{ section.settings.card_background | default: '#fff' }}; border-radius:6px;">
          <h4 style="margin:0 0 8px 0;">FAQ</h4>
          <div>
            <button type="button" class="accordion-toggle" data-target="faq1" aria-expanded="false" style="width:100%; text-align:left; padding:10px; background:#f7faf7; border-radius:6px; border:none; margin-bottom:8px;">What if my photo isn’t perfect?</button>
            <div id="faq1" class="accordion-panel" hidden style="padding:8px 0;">Upload it anyway — we’ll review and advise. You can request edits or upload a different photo if needed.</div>

            <button type="button" class="accordion-toggle" data-target="faq2" aria-expanded="false" style="width:100%; text-align:left; padding:10px; background:#f7faf7; border-radius:6px; border:none; margin-bottom:8px;">Can I combine two photos?</button>
            <div id="faq2" class="accordion-panel" hidden style="padding:8px 0;">Yes — leave a note on upload and our artists will advise on the best approach.</div>

            <button type="button" class="accordion-toggle" data-target="faq3" aria-expanded="false" style="width:100%; text-align:left; padding:10px; background:#f7faf7; border-radius:6px; border:none;">What if I want a full redraw?</button>
            <div id="faq3" class="accordion-panel" hidden style="padding:8px 0;">We offer a full redraw option if you’d like to start from a new photo (pricing details available at checkout).</div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- Structured Data (FAQ) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {"@type": "Question","name": "What if my photo isn't perfect?","acceptedAnswer": {"@type":"Answer","text":"Upload it anyway — we’ll review and advise. You can request edits or upload another photo."}},
      {"@type": "Question","name": "Can I combine two photos?","acceptedAnswer": {"@type":"Answer","text":"Yes — leave a note on upload and our artists will advise."}},
      {"@type": "Question","name": "What if I want a full redraw?","acceptedAnswer": {"@type":"Answer","text":"We offer a full redraw option; pricing details available at checkout."}}
    ]
  }
  </script>

</section>

<!-- Section JS: Carousel and Accordion (vanilla, namespaced to section.id) -->
<script>
(function(){
  var sectionId = '{{ section.id }}';
  var carousel = document.getElementById('perkie-carousel-{{ section.id }}');
  if (carousel) {
    var track = carousel.querySelector('.carousel-track');
    var slides = carousel.querySelectorAll('.carousel-slide');
    var dots = carousel.querySelectorAll('.dot');
    var prev = carousel.querySelector('[data-action="prev"]');
    var next = carousel.querySelector('[data-action="next"]');
    var idx = 0;
    function go(i){
      idx = (i + slides.length) % slides.length;
      track.style.transform = 'translateX(' + (-idx * 100) + '%)';
      dots.forEach(function(d){ d.style.background = '{{ section.settings.dot_color }}'; });
      if(dots[idx]) dots[idx].style.background = '{{ section.settings.dot_color_active }}';
    }
    if(prev) prev.addEventListener('click', function(){ go(idx-1); });
    if(next) next.addEventListener('click', function(){ go(idx+1); });
    dots.forEach(function(d){ d.addEventListener('click', function(){ go(parseInt(d.getAttribute('data-index'))); }); });
  }

  // Accordion
  document.querySelectorAll('.accordion-toggle').forEach(function(btn){
    btn.addEventListener('click', function(){
      var target = document.getElementById(btn.getAttribute('data-target'));
      var expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', !expanded);
      if(target){ if(target.hidden){ target.hidden = false; } else { target.hidden = true; } }
    });
  });
})();
</script>

{% schema %}
{
  "name": "Perkie Photo Guide",
  "settings": [
    {"type":"text","id":"heading","label":"Heading","default":"How To Choose Your Image for a Perkie Print"},
    {"type":"textarea","id":"subheading","label":"Subheading (optional)","default":"Get the best photo for your custom pet portrait — tips on lighting, framing, phone settings, and upload specs."},
    {"type":"image_picker","id":"good_image","label":"Good example image"},
    {"type":"image_picker","id":"okay_image","label":"Okay example image"},
    {"type":"image_picker","id":"bad_image","label":"Bad example image"},
    {"type":"page","id":"cta_link","label":"Upload page"},
    {"type":"text","id":"cta_label","label":"CTA button label","default":"Preview Your Pet"},
    {"type":"color","id":"color_background","label":"Background color","default":"#ffffff"},
    {"type":"color","id":"color_text","label":"Text color","default":"#0f172a"},
    {"type":"color","id":"color_subheading","label":"Subheading color","default":"#475569"},
    {"type":"color","id":"card_background","label":"Card background","default":"#ffffff"},
    {"type":"color","id":"color_text_secondary","label":"Secondary text color","default":"#6b7280"},
    {"type":"color","id":"cta_color","label":"CTA background color","default":"#10b981"},
    {"type":"color","id":"cta_text_color","label":"CTA text color","default":"#ffffff"},
    {"type":"color","id":"dot_color","label":"Carousel dot color","default":"#d1d5db"},
    {"type":"color","id":"dot_color_active","label":"Carousel active dot color","default":"#6b7280"}
  ],
  "blocks": [],
  "presets": [
    {"name":"Perkie Photo Guide","category":"Custom"}
  ]
}
{% endschema %}

{% stylesheet %}
/* Minimal overrides to better match Dawn Pro spacing and responsive behavior */
#perkie-photo-guide .page-width { max-width: 1100px; margin-left:auto; margin-right:auto; }
@media (min-width: 750px){
  #perkie-photo-guide .grid--2 { display:grid; grid-template-columns: 1fr 380px; gap:24px; }
}
@media (max-width: 749px){
  #perkie-photo-guide .grid--2 { display:block; }
}
{% endstylesheet %}

<!-- Integration notes:
- Add this file to sections/photo-guide.liquid
- Edit images and colors via the theme editor
- If your upload CTA uses a modal, set cta_link to the page that triggers it or use a JS hook to open the modal when clicking the CTA
- If you'd like, I can convert inline styles into CSS classes that use Dawn Pro theme variables directly (e.g., var(--color-foreground)).
-->
