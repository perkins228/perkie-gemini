/**
 * Effects V2 - Mobile Optimizations
 * Mobile-specific enhancements for 70% of traffic
 *
 * Features:
 * - Thumb-zone friendly layouts
 * - Touch target sizing (44px minimum iOS, 48dp Android)
 * - Native-like interactions
 * - Performance optimizations
 */

/* ==========================================================================
   Mobile Touch Targets (iOS 44px / Android 48dp minimum)
   ========================================================================== */

@media screen and (max-width: 749px) {

  /* Upload button - thumb-zone optimized */
  .upload-button {
    min-height: 48px;
    padding: 0.875rem 2.5rem;
    font-size: 1.0625rem; /* Slightly larger for easier reading */
  }

  /* Effect buttons - touch-friendly */
  .effect-btn {
    min-height: 72px; /* Larger for icon + text */
    padding: 1rem 0.5rem;
    font-size: 0.8125rem;
  }

  .effect-icon {
    font-size: 1.75rem; /* Larger icons on mobile */
  }

  /* Action buttons - thumb-zone */
  .action-btn {
    min-height: 48px;
    padding: 0.875rem 1.75rem;
    font-size: 1rem;
  }

  /* ==========================================================================
     Mobile Layout Adjustments
     ========================================================================== */

  .effects-v2-ui {
    padding: 0.75rem;
  }

  /* Upload dropzone - compact on mobile */
  .upload-dropzone {
    padding: 2.5rem 1.5rem;
    margin-bottom: 1rem;
  }

  .upload-dropzone h3 {
    font-size: 1.25rem;
  }

  .upload-dropzone p {
    font-size: 0.875rem;
  }

  /* Effect buttons grid - 2 columns on mobile */
  .effect-buttons {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.625rem;
  }

  /* Actions - stack vertically on small screens */
  .effects-actions {
    flex-direction: column;
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  }

  .action-btn {
    width: 100%;
    justify-content: center;
  }

  /* ==========================================================================
     Mobile Performance Optimizations
     ========================================================================== */

  /* Reduce motion for better performance */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Optimize hover states for touch (remove transform on small screens) */
  .upload-dropzone:hover {
    transform: none;
  }

  .effect-btn:hover {
    transform: none;
  }

  .action-btn:hover {
    transform: none;
  }

  /* Use will-change for smoother animations */
  .progress-bar {
    will-change: width;
  }

  .processing-spinner {
    will-change: transform;
  }

  /* ==========================================================================
     Mobile Processing View
     ========================================================================== */

  .effects-processing {
    padding: 2.5rem 1.5rem;
  }

  .processing-message {
    font-size: 1rem;
  }

  .processing-detail {
    font-size: 0.8125rem;
  }

  /* ==========================================================================
     Mobile Result View
     ========================================================================== */

  .result-image-container {
    margin-bottom: 1.5rem;
    border-radius: 6px;
  }

  .effects-selector h4 {
    font-size: 1rem;
    margin-bottom: 0.875rem;
  }

  /* ==========================================================================
     Mobile Safe Area (iPhone X+ notch support)
     ========================================================================== */

  @supports (padding: max(0px)) {
    .effects-v2-ui {
      padding-left: max(0.75rem, env(safe-area-inset-left));
      padding-right: max(0.75rem, env(safe-area-inset-right));
      padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
    }
  }

  /* ==========================================================================
     Mobile Drag and Drop (disable on small screens)
     ========================================================================== */

  .upload-dropzone.dragover {
    /* Reduce visual feedback on mobile */
    border-color: rgba(var(--color-foreground), 0.3);
  }

  /* ==========================================================================
     Mobile Typography Scaling
     ========================================================================== */

  /* Ensure text doesn't become unreadable on very small screens */
  @media screen and (max-width: 375px) {
    .upload-dropzone h3 {
      font-size: 1.125rem;
    }

    .upload-dropzone p {
      font-size: 0.8125rem;
    }

    .effect-btn {
      font-size: 0.75rem;
    }

    .effect-icon {
      font-size: 1.5rem;
    }
  }

  /* ==========================================================================
     Mobile Loading States
     ========================================================================== */

  /* Smaller spinner on mobile */
  .processing-spinner {
    width: 40px;
    height: 40px;
  }

  /* Thinner progress bar on mobile */
  .processing-progress {
    height: 6px;
    max-width: 100%;
  }

  /* ==========================================================================
     Landscape Mode Optimizations (Mobile)
     ========================================================================== */

  @media screen and (orientation: landscape) and (max-height: 500px) {
    /* Compact layout for landscape */
    .upload-dropzone {
      padding: 1.5rem 1rem;
    }

    .upload-dropzone h3 {
      font-size: 1rem;
      margin-bottom: 0.25rem;
    }

    .upload-dropzone p {
      margin-bottom: 0.75rem;
    }

    .effects-processing {
      padding: 1.5rem 1rem;
    }

    .result-image-container {
      max-width: 400px;
      margin-bottom: 1rem;
    }
  }

  /* ==========================================================================
     PWA / Standalone Mode
     ========================================================================== */

  @media (display-mode: standalone) {
    /* Adjust for PWA display */
    .effects-v2-ui {
      padding-top: max(0.75rem, env(safe-area-inset-top));
    }
  }
}

/* ==========================================================================
   Small Mobile (< 375px)
   ========================================================================== */

@media screen and (max-width: 374px) {
  .effect-buttons {
    gap: 0.5rem;
  }

  .effect-btn {
    padding: 0.875rem 0.375rem;
  }

  .upload-button {
    padding: 0.875rem 2rem;
    font-size: 1rem;
  }
}

/* ==========================================================================
   Tablet (Portrait - 750px to 1024px)
   ========================================================================== */

@media screen and (min-width: 750px) and (max-width: 1024px) {
  /* Optimize for iPad portrait */
  .effect-buttons {
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  .effects-actions {
    flex-direction: row;
    max-width: none;
  }

  .action-btn {
    width: auto;
  }
}
