/**
 * Inline Email Capture Styles - Mobile-First
 *
 * Design Goals:
 * - Mobile-first responsive (70% of traffic)
 * - WCAG AAA accessibility (64px buttons, 56px inputs)
 * - iOS Safari zoom prevention (16px font)
 * - Color-coded CTAs (purple = email, green = shop, gray = tertiary)
 * - Responsive breakpoints (640px for tablet/desktop)
 */

/* ============================================================================
   EMAIL CAPTURE INLINE SECTION
   ============================================================================ */

.email-capture-inline {
  background: #f9fafb; /* Gray-50 */
  border: 1px solid #e5e7eb; /* Gray-200 */
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 0; /* Reduced spacing */
}

@media (min-width: 640px) {
  .email-capture-inline {
    padding: 24px;
  }
}

/* ============================================================================
   ACTION BUTTONS CONTAINER
   ============================================================================ */

/**
 * Container for all CTA buttons below email capture section
 * Mobile-first: Stack vertically on all screen sizes
 */
.action-buttons {
  display: flex;
  flex-direction: column; /* Stack vertically (mobile-first) */
  gap: 16px; /* Spacing between buttons */
  width: 100%;
  margin-top: 0; /* Email section provides margin-bottom */
  padding-left: 0;
  padding-right: 0;
}

/* Desktop: Constrain width and center */
@media (min-width: 640px) {
  .action-buttons {
    max-width: 540px; /* Prevent buttons from being too wide */
    margin: 0 auto; /* Center container */
    padding-left: 0;
    padding-right: 0;
  }
}

/* Force vertical stacking on mobile (redundant but explicit) */
@media (max-width: 639px) {
  .action-buttons {
    flex-direction: column !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  .btn-primary-shop,
  .btn-link {
    width: 100% !important;
  }
}

/* Email Capture Header */
.email-capture-header {
  margin-bottom: 16px;
}

.email-heading {
  font-size: 18px;
  font-weight: 700;
  color: #111827; /* Gray-900 */
  line-height: 1.3;
  margin: 0 0 16px;
  text-align: left;
}

/* OR Separator */
.cta-separator {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 16px 0;
}

.separator-line {
  flex: 1;
  height: 1px;
  background: #d1d5db; /* Gray-300 */
}

.separator-text {
  font-size: 14px;
  font-weight: 500;
  color: #6b7280; /* Gray-600 */
  text-transform: lowercase;
}

/* Email Prompt Text */
.email-prompt-text {
  font-size: 12px;
  color: #6b7280; /* Gray-600 */
  line-height: 1.5;
  margin: 0 0 12px;
  text-align: left;
}

/* Email Form */
.email-form-inline {
  width: 100%;
}

/* Email Input Group (stacked vertically on all breakpoints) */
.email-input-group {
  display: flex;
  flex-direction: column; /* Keep vertical stacking on all screens */
  gap: 12px;
  margin-bottom: 12px;
}

/* Email Input */
.email-input-inline {
  height: 56px;
  padding: 16px;
  font-size: 16px; /* Prevents iOS Safari zoom */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  color: #111827; /* Gray-900 */
  background: #ffffff;
  border: 1px solid #d1d5db; /* Gray-300 */
  border-radius: 8px;
  width: 100%; /* Full-width on all screens for better usability */
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.email-input-inline:focus {
  outline: none;
  border-color: #6366f1; /* Indigo-500 */
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.email-input-inline::placeholder {
  color: #9ca3af; /* Gray-400 */
}

.email-input-inline.error {
  border-color: #ef4444; /* Red-500 */
}

/* Email Submit Button (Pink Gradient) */
.btn-email-submit {
  height: 48px;
  min-height: 48px;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: 600;
  color: #ffffff;
  background: linear-gradient(135deg, #FFA4AA 0%, #FF5964 100%);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

@media (min-width: 640px) {
  .btn-email-submit {
    width: auto;
    min-width: 160px; /* Prevents button from being too narrow */
  }
}

.btn-email-submit:hover {
  background: linear-gradient(135deg, #FF8A92 0%, #FF3D4A 100%);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 89, 100, 0.3);
}

.btn-email-submit:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(99, 102, 241, 0.2);
}

.btn-email-submit:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-email-submit:focus-visible {
  outline: 3px solid #3b82f6; /* Blue-500 */
  outline-offset: 2px;
}

/* Button Text and Icon */
.btn-email-submit .btn-text {
  order: 1;
}

.btn-email-submit .btn-icon {
  order: 2;
  font-size: 20px;
}

/* Privacy Note */
.email-privacy-note {
  font-size: 12px;
  color: #9ca3af; /* Gray-400 */
  line-height: 1.4;
  margin: 0 0 12px;
  text-align: left;
}

.email-privacy-note a {
  color: #6366f1; /* Indigo-500 */
  text-decoration: underline;
  transition: color 0.2s ease;
}

.email-privacy-note a:hover {
  color: #4f46e5; /* Indigo-600 */
}

/* Error Message (Inline) */
.email-error-inline {
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  margin-top: 12px;
  background: #fef2f2; /* Red-50 */
  color: #dc2626; /* Red-600 */
  border: 1px solid #fecaca; /* Red-200 */
  display: flex;
  align-items: center;
  gap: 8px;
}

.email-error-inline[hidden] {
  display: none;
}

/* Success Message (Inline) */
.email-success-inline {
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  margin-top: 12px;
  background: #f0fdf4; /* Green-50 */
  color: #16a34a; /* Green-600 */
  border: 1px solid #bbf7d0; /* Green-200 */
  display: flex;
  align-items: center;
  gap: 8px;
}

.email-success-inline[hidden] {
  display: none;
}

.email-success-inline .success-icon {
  font-size: 18px;
  font-weight: 700;
}

/* Loading State */
.btn-email-submit.loading {
  position: relative;
  color: transparent;
}

.btn-email-submit.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 24px;
  height: 24px;
  margin: -12px 0 0 -12px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ============================================================================
   ADD TO PRODUCT BUTTON (Pink Gradient - Inside Email Container)
   ============================================================================ */

.btn-primary-shop {
  height: 48px;
  min-height: 48px;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: 600;
  color: #ffffff;
  background: linear-gradient(135deg, #FFA4AA 0%, #FF5964 100%);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 0;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.btn-primary-shop:hover {
  background: linear-gradient(135deg, #FF8A92 0%, #FF3D4A 100%);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 89, 100, 0.3);
}

.btn-primary-shop:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(255, 89, 100, 0.2);
}

.btn-primary-shop:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-primary-shop:focus-visible {
  outline: 3px solid #FF5964;
  outline-offset: 2px;
}

/* ============================================================================
   TRY ANOTHER PET LINK (Gray Text Link)
   ============================================================================ */

.btn-link {
  height: 48px; /* WCAG AAA touch target */
  padding: 12px 16px;
  font-size: 16px;
  font-weight: 500;
  color: #6b7280; /* Gray-600 */
  background: transparent;
  border: none;
  cursor: pointer;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-decoration: none;
  transition: color 0.2s ease, transform 0.2s ease;
}

.btn-link:hover {
  color: #4b5563; /* Gray-700 */
  text-decoration: underline;
}

.btn-link:active {
  transform: scale(0.98);
}

.btn-link:focus-visible {
  outline: 3px solid #6b7280; /* Gray-600 */
  outline-offset: 2px;
  border-radius: 8px;
}

/* Process Another Pet Button - Reduced Vertical Padding */
.btn-link.process-another-btn {
  padding: 8px 16px; /* Reduced top/bottom padding from 12px to 8px */
}

/* ============================================================================
   ACCESSIBILITY
   ============================================================================ */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .btn-email-submit,
  .btn-primary-shop {
    border: 2px solid currentColor;
  }

  .email-input-inline {
    border-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .btn-email-submit,
  .btn-primary-shop,
  .btn-link,
  .email-input-inline {
    transition: none !important;
  }

  .btn-email-submit:hover,
  .btn-primary-shop:hover {
    transform: none;
  }

  .btn-email-submit.loading::after {
    animation: none;
  }
}

/* ============================================================================
   PRINT STYLES
   ============================================================================ */

@media print {
  .email-capture-inline,
  .cta-divider,
  .btn-primary-shop,
  .btn-link {
    display: none !important;
  }
}

/* ============================================================================
   MOBILE OPTIMIZATIONS
   ============================================================================ */

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  /* Prevent zoom on focus for iOS Safari */
  .email-input-inline {
    font-size: 16px; /* Already set, but reinforcing */
  }

  /* Prevent rubber band scrolling from affecting layout */
  .email-capture-inline {
    -webkit-overflow-scrolling: touch;
  }
}

/* Android Chrome specific fixes */
@supports not (-webkit-touch-callout: none) {
  /* Disable default Material Design ripple on buttons */
  .btn-email-submit,
  .btn-primary-shop,
  .btn-link {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ============================================================================
   iOS SAFE AREA SUPPORT
   ============================================================================ */

/**
 * Handle iPhone X/11/12/13/14/15 notch and home indicator
 * Prevents content clipping on modern iPhones (40% of mobile traffic)
 */

/* Email capture container - handle bottom spacing for home indicator */
.email-capture-inline {
  padding-bottom: max(20px, env(safe-area-inset-bottom));
}

/* Action buttons container - handle all safe areas */
.action-buttons {
  padding-left: max(0px, env(safe-area-inset-left));
  padding-right: max(0px, env(safe-area-inset-right));
  padding-bottom: max(16px, env(safe-area-inset-bottom));
}

/* Last button (Try Another Pet) - additional bottom spacing */
.btn-link {
  margin-bottom: max(0px, env(safe-area-inset-bottom));
}

/* Landscape mode adjustments - handle notch on left/right (mobile only) */
@media (orientation: landscape) and (max-width: 1023px) {
  .email-capture-inline {
    padding-left: max(20px, env(safe-area-inset-left));
    padding-right: max(20px, env(safe-area-inset-right));
  }

  .action-buttons {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-bottom: max(12px, env(safe-area-inset-bottom)); /* Smaller home indicator in landscape */
  }
}

/* Desktop: Remove all horizontal padding to match effect-grid-wrapper width */
@media (min-width: 1024px) {
  .action-buttons {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}
