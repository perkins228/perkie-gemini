üîß Deploying Storage Upload Error Fix...
üìù This deployment fixes:
   - Safari data URL parsing issues
   - Proper error classification (400/413/500/503)
   - Enhanced validation and logging

üöÄ Deploying to production...
Building using Dockerfile and deploying container to Cloud Run service [inspirenet-bg-removal-api] in project [perkieprints-processing] region [us-central1]
Building and deploying...
Uploading sources............done
Building Container...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................done
Setting IAM Policy................done
Creating Revision.................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................done
Routing traffic.....done
Done.
Service [inspirenet-bg-removal-api] revision [inspirenet-bg-removal-api-00097-7zt] has been deployed and is serving 100 percent of traffic.
Service URL: https://inspirenet-bg-removal-api-725543555429.us-central1.run.app

‚úÖ Deployment complete!
‚è±Ô∏è  Deployment took 1058 seconds

üß™ Running post-deployment tests...

1Ô∏è‚É£  Testing health endpoint...
   ‚úÖ Health check passed

2Ô∏è‚É£  Testing model info endpoint...
   ‚úÖ Model info retrieved successfully

3Ô∏è‚É£  Testing storage upload endpoint with valid data...
   ‚úÖ Storage upload with valid data succeeded
   üìç Response: {"urls":{"original":"https://storage.googleapis.com/perkieprints-customer-images/orders/test-deploy-...

4Ô∏è‚É£  Testing storage upload error handling (malformed data)...
   ‚úÖ Error handling works correctly (returned 400 for invalid data)

5Ô∏è‚É£  Testing warmup endpoint (may take 30-60s on cold start)...
   ‚úÖ Warmup succeeded in 68 seconds

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üéâ Storage Fix Deployment Complete!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìä Deployment Summary:
   ‚Ä¢ Total deployment time: 1058s
   ‚Ä¢ Warmup time: 68s
   ‚Ä¢ Service: inspirenet-bg-removal-api
   ‚Ä¢ Region: us-central1
   ‚Ä¢ URL: https://inspirenet-bg-removal-api-725543555429.us-central1.run.app

‚úÖ All critical tests passed!

üìã Next Steps:
   1. Monitor Cloud Run logs for 1 hour
   2. Test with Safari on macOS (manual)
   3. Watch for 500 errors on /api/storage/upload

üîç Monitor logs with:
   gcloud logging read "resource.type=cloud_run_revision AND resource.labels.service_name=inspirenet-bg-removal-api" --limit=50 --format=json

üîÑ Rollback if needed:
   gcloud run services update-traffic inspirenet-bg-removal-api --to-revisions=PREVIOUS_REVISION=100 --region=us-central1

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
