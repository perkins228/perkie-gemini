{%- style -%}
  #ks-pricing-plans-{{ section.id }} {
    padding-top: {{ section.settings.pt | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.pb | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    #ks-pricing-plans-{{ section.id }} {
      padding-top: {{ section.settings.pt }}px;
      padding-bottom: {{ section.settings.pb }}px;
    }
  }
{% endstyle %}

  <div 
  id="ks-pricing-plans-{{ section.id }}"
  class="ks-pricing-plans color-{{ section.settings.color_scheme }} gradient">

  <div 
    class="ks-section-header page-width"
    style="max-width: {{ section.settings.page_width | append: 'px' }}">
    {%- unless section.settings.title == blank -%}
      <h2 
        class="
          title title-wrapper--no-top-margin inline-richtext 
          {{ section.settings.heading_size }}
          {% if settings.animations_reveal_on_scroll %}scroll-trigger animate--slide-in{% endif %}
        ">
        {{ section.settings.title }}
      </h2>
    {%- endunless -%}
    {%- unless section.settings.description == blank -%}
      <div class="description rte {{ section.settings.description_size }} {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        {{ section.settings.description }}
      </div>
    {%- endunless -%}
  </div>

  <slider-component 
    class="
      slider-mobile-gutter page-width-desktop
      {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}
    "
    style="max-width: {{ section.settings.page_width | append: 'px' }}">
    <ul
      id="Slider-{{ section.id }}"
      data-id="{{ section.id }}"
      class="
        grid grid--peek contains-card contains-card--standard 
        grid--1-col-tablet-down
        grid--2-col-tablet
        grid--{{ section.blocks.size }}-col-desktop 
        slider slider--tablet 
      "
      role="list"
      aria-label="{{ 'general.slider.name' | t }}">
      {%- for block in section.blocks -%}
        <li
          id="Slide-{{ section.id }}-{{ forloop.index }}"
          class="grid__item slider__slide {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          {% if settings.animations_reveal_on_scroll %}
            data-cascade
            style="--animation-order: {{ forloop.index }};"
          {% endif %}
        >
          <div 
            class="card-wrapper underline-links-hover">
            <div 
              class="card card--standard"
              style="
                --border-radius: {{ block.settings.card_corner_radius | divided_by: 10.0 }}rem;
                --border-width: {{ block.settings.card_border_thickness | divided_by: 10.0 }}rem;
                --border-opacity: {{ block.settings.card_border_opacity | divided_by: 100.0 }};
              ">
              <div class="card__inner color-{{ block.settings.card_color_scheme }} gradient">
                <div class="card__content">
                  <div class="card__information">
                    {% unless block.settings.badge == blank -%}
                      <p 
                        class="ks-badge-custom badge"
                        style="background-color: {{ block.settings.badge_color }}">
                        {{ block.settings.badge }}
                      </p>
                    {% endunless %}
                    <div class="ks-card-header">
                      {% unless block.settings.icon == blank -%}
                        <p class="ks-card-icon">
                          <img
                            src="{{ block.settings.icon | image_url: width: block.settings.icon_size }}"
                            alt="{{ block.settings.alt }}"
                            width="{{ block.settings.icon_size }}"
                            height="{{ block.settings.icon_size }}"
                            loading="lazy">
                        </p>
                      {% endunless %}
                      {% unless block.settings.title == blank %}
                        <h3 class="title {{ block.settings.title_font_size }}">
                          {{ block.settings.title }}
                        </h3>
                      {% endunless %}
                      {% unless block.settings.price == blank %}
                        <p 
                          class="ks-card-price" 
                          style="font-size: {{ block.settings.price_font_size | append: 'em' }};">
                          {{ block.settings.price
                            | replace: '[', '<s>'
                            | replace: ']', '</s>' }}
                        </p>
                      {% endunless %}
                      {% unless block.settings.description == blank %}
                        <div class="description rte {{ block.settings.description_font_size }}">
                          {{ block.settings.description }}
                        </div>
                      {% endunless %}
                    </div>
                    <hr>
                    <div class="ks-card-body">
                      {% unless block.settings.features == blank %}
                        <div 
                          class="ks-card-body-features description rte"
                          data-has-icons="{% if block.settings.features contains '[x]' or block.settings.features contains '[y]' %}true{% else %}false{% endif %}"
                          style="text-align: {{ block.settings.features_text_align }};">
                          {{ block.settings.features
                            | replace: '[y]', '<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon-y" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>' 
                            | replace: '[x]', '<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon-x" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>' 
                          }}
                        </div>
                      {% endunless %}
                    </div>
                    <div class="ks-card-footer">
                      {% unless block.settings.btn_text == blank %}
                        {% if block.settings.product == nil %}
                          <a 
                            href="{{ block.settings.btn_url }}" 
                            class="button {{ block.settings.btn_style }}">
                            {{ block.settings.btn_text }}
                          </a>
                        {% else %}
                          <product-form data-section-id="{{ section.id }}">
                            {%- form 'product', block.settings.product, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
                              <input type="hidden" name="id" value="{{ block.settings.variant_id | default: block.settings.product.first_available_variant.id }}">
                              <button 
                                type="submit" 
                                name="add" 
                                class="button {{ block.settings.btn_style }}">
                                <span>{{ block.settings.btn_text }}</span>
                                {%- render 'loading-spinner' -%}
                              </button>
                            {% endform %}
                          </product-form>
                        {% endif %}
                      {% endunless %}
                      {% unless block.settings.note == blank %}
                        <div class="ks-card-note rte">
                          {{ block.settings.note }}
                        </div>
                      {% endunless %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
      {%- endfor -%}
    </ul>
    <div class="slider-buttons">
      <button
        type="button"
        class="slider-button slider-button--prev"
        name="previous"
        aria-label="{{ 'general.slider.previous_slide' | t }}"
        aria-controls="Slider-{{ section.id }}">
        <span class="svg-wrapper">
          {{- 'icon-caret.svg' | inline_asset_content -}}
        </span>
      </button>
      <div class="slider-counter caption">
        <span class="slider-counter--current">1</span>
        <span aria-hidden="true"> / </span>
        <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
        <span class="slider-counter--total">{{ section.blocks.size }}</span>
      </div>
      <button
        type="button"
        class="slider-button slider-button--next"
        name="next"
        aria-label="{{ 'general.slider.next_slide' | t }}"
        aria-controls="Slider-{{ section.id }}">
        <span class="svg-wrapper">
          {{- 'icon-caret.svg' | inline_asset_content -}}
        </span>
      </button>
    </div>
  </slider-component>
  
</div>

{% schema %}
{
  "name": "KS - Pricing plans",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "General"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "page_width",
      "label": "Page width (px)",
      "info": "Leave empty to use the global \"page-width\"."
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Heading",
      "default": "Pricing Plans",
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" },
        { "value": "hxl", "label": "Extra large" },
        { "value": "hxxl", "label": "Extra extra large" }
      ],
      "default": "h1"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>An optional description for this section</p>",
    },
    {
      "type": "select",
      "id": "description_size",
      "label": "Description size",
      "default": "fs-md",
      "options": [
        { "value": "fs-xs", "label": "xs" },
        { "value": "fs-sm", "label": "sm" },
        { "value": "fs-md", "label": "md" },
        { "value": "fs-lg", "label": "lg" },
        { "value": "fs-xl", "label": "xl" }
      ]
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "pt",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 36,
      "unit": "px",
    },
    {
      "type": "range",
      "id": "pb",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 36,
      "unit": "px",
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "color_scheme",
          "id": "card_color_scheme",
          "label": "Color scheme",
          "default": "scheme-1"
        },
        {
          "type": "range",
          "id": "card_border_thickness",
          "min": 0,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Border thickness",
          "default": 0
        },
        {
          "type": "range",
          "id": "card_border_opacity",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Border opacity",  
          "default": 100
        },
        {
          "type": "range",
          "id": "card_corner_radius",
          "min": 0,
          "max": 40,
          "step": 2,
          "unit": "px",
          "label": "Corner radius",
          "default": 0
        },
        {
          "type": "header",
          "content": "Header"
        },
        {
          "type": "text",
          "id": "badge",
          "label": "Badge"
        },
        {
          "type": "color",
          "id": "badge_color",
          "label": "Badge color",
          "default": "#334FB4"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon (svg)",
          "info": "You can get SVG icons from sources like the [Bootstrap icons](https://icons.getbootstrap.com/)"
        },
        {
          "type": "range",
          "id": "icon_size",
          "label": "Icon size",
          "default": 40,
          "min": 8,
          "max": 120,
          "step": 2,
          "unit": "px"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Plan Title"
        },
        {
          "type": "select",
          "id": "title_font_size",
          "label": "Title font-size",
          "default": "h3",
          "options": [
            { "value": "h1", "label": "H1" },
            { "value": "h2", "label": "H2" },
            { "value": "h3", "label": "H3" },
            { "value": "h4", "label": "H4" },
            { "value": "h5", "label": "H5" },
            { "value": "h6", "label": "H6" }
          ]
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price",
          "default": "$19 USD"
        },
        {
          "type": "range",
          "id": "price_font_size",
          "label": "Price font-size",
          "default": 2,
          "min": 1,
          "max": 2,
          "step": 0.1,
          "unit": "em"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description (optional)",
          "default": "<p>An optional description for this plan</p>"
        },
        {
          "type": "select",
          "id": "description_font_size",
          "label": "Description font-size",
          "default": "fs-sm",
          "options": [
            { "value": "fs-xs", "label": "xs" },
            { "value": "fs-sm", "label": "sm" },
            { "value": "fs-md", "label": "md" },
            { "value": "fs-lg", "label": "lg" },
            { "value": "fs-xl", "label": "xl" }
          ]
        },
        {
          "type": "header",
          "content": "Body"
        },
        {
          "type": "richtext",
          "id": "features",
          "label": "Features",
          "default": "<ul><li>Feature 1</li><li>Feature 2</li><li>Feature 3</li><li>Feature 4</li><li>Feature 5</li></ul>"
        },
        {
          "type": "text_alignment",
          "id": "features_text_align",
          "label": "Features text-align",
          "default": "center"
        },
        {
          "type": "header",
          "content": "Footer"
        },
        {
          "type": "text",
          "id": "btn_text",
          "label": "Button text",
          "default": "Learn more"
        },
        {
          "type": "select",
          "id": "btn_style",
          "label": "Button style",
          "default": "button--primary",
          "options": [
            { "value": "button--primary", "label": "Primary" },
            { "value": "button--secondary", "label": "Secondary" },
          ]
        },
        {
          "type": "url",
          "id": "btn_url",
          "label": "Button URL"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product",
          "info": "Select a product to switch the button into a \"Add to cart\" button. The URL setting above will not have effect."
        },
        {
          "type": "text",
          "id": "variant_id",
          "label": "Product variant ID",
          "info": "Specify here the variant ID that you want to add to the cart for the selected product above. If left blank the first available variant will be used."
        },
        {
          "type": "richtext",
          "id": "note",
          "label": "Note (optional)",
          "default": "<p>An optional note for this plan</p>"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "presets": [
    {
      "name": "KS - Pricing plans",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}