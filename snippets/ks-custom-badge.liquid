{% comment %}
  Renders a custom badge (text) usually on the top of the product cards.

  Accepts:
  - card_product: {Object} Product Liquid object

  Usage:
  {% render 'ks-custom-badge', product: product %}
{% endcomment %}
 
{% liquid 
  assign metafield_namespace = settings.custom_badge_metafield | split: '.' | first
  assign metafield_key = settings.custom_badge_metafield | split: '.' | last

  assign metafield_value = product.metafields[metafield_namespace][metafield_key].value
%}

{% if metafield_value %}
  {% liquid
    assign custom_badge_text = metafield_value | split: '|' | first
    assign custom_badge_color = metafield_value | split: '|' | last 
  %}

  <span 
    class="ks-product-custom-badge badge"
    style="{% if custom_badge_color %}background-color: {{ custom_badge_color | default: 'var(--bs-primary)' }}; {% endif %}">
    {{ custom_badge_text }}
  </span>
{% endif %}